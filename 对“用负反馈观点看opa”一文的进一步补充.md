# 反馈观点看OPA
上文中说用负反馈的观点看opa，有很多优点，但是似乎没法总结成一个系统的方法。这几天似乎又有所心得，先大概写一点。
首先说在dc情况下，不考虑电容，输出电阻也几乎不考虑。这时候主要是考虑cascode管的作用。如果我们在这级把分析变量从电压变为电流，就容易理解多了。这级就变成了增益为一的电流放大级。用这个方法，就很容易把运放用信号流图画出来，有了信号流图，分析反馈什么的就轻而易举了。
在ac情况下，就有些复杂了，因为即使用电流做变量，一旦考虑电容电阻，就变得没法分析了。在这点上我想出一种比较通用的方法，就是用miller定理，把所有跨接在两个节点上的器件变为两个节点对地的器件，这样就把所有的状态变量都变成了电压，各个节点现在就被完全拆分成了传输函数串联关系和反馈关系。这时就可以考虑信号流了。
这事说起来容易做起来麻烦，顶多是说概念上显得清楚了，但是从实质上来说，和直接推导传输函数完全一致，没有节省任何工作量。
先说好处，这种方法在原则上可以明确看出系统级零点的来历，比如在miller cascode opa中可以推出cascode级处是有一个前馈的，也避免了我们讨论问题时纠缠不清的一些情况，比如该处有个电容，是否构成极点，如果构成，又该和哪个电阻去拼（http://bbs.eetop.cn/viewthread.php?tid=384257&extra=page%3D7%26amp%3Borderby%3Ddateline里就是这种情况，感觉大家不停的在说，但由于缺乏数学上的严格性，就有些跟着感觉走的意思）。再说缺点，从数学上说，这个方法和原来的工作量是一致的。回忆电路分析里的内容，任何一个双端口电路，都可以拆分成前馈和反馈两部分，我们这里只不过是把这个过程明确化了。另一点，当所有节点都需要这样做时，就变成了许许多多的局部反馈，在每个负反馈处原则上可能简化分析，但高增益并不是处处都有的，因此可能对局部反馈的分析仍然很复杂，最后还是等效于求解传输函数。所以这个方法其实只在几种简单运放这儿似乎好用些。但这几种运放又已经被大家用各种方法分析的很透彻了。
举个例子：一个miller cascode opa
  ，
如果只看dc下，可以简化为
 ，
如果用等效电路方法可以给出信号流图。如果需要考虑ac情况，做更复杂的小信号分析可以得到
 ，
这个信号流虽然可以看出前馈反馈，但实际分析起来也很麻烦，倒是可以大概的看出补偿电容cc的反馈作用。需要注意的是上面的分析中还忽略了许多电阻电容，如果添加上去，会有更多的极零点出现，更进一步增加了分析的难度。
 

