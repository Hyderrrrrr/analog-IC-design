# 接地二三事
接地是个不大不小的问题。我一直认为如果想解决这个问题，其实只需要最基本的电路知识，但是同时也需要对电路保持最大程度的理解，所以这个问题真是一个不大不小的问题。
地这个概念其实是最能让人迷惑的东西，因为它似乎是个奇点，所有的信号到那里就都结束了，自己却永远是0v。但是在实际中，经常有人爱说，嗯这里有噪声，是因为地上有噪声。其实我也爱用这个借口，因为电源有噪声似乎是可以避免的，但地上有噪声似乎就没法避免了。但是似乎这里有逻辑问题，地不就是0v吗，怎么会有噪声？
要解释这个问题，我习惯用海平面打比方。有了海平面，我们可以说珠穆朗玛峰是8848米。可以说北京海拔是10米，但是如果由于温室效应，海平面上升了怎么办？
所以可以看出，电路里的地其实并没有特别之处，其实就是被大家选作海平面的东西（注意，这里的地是信号地）。而对单端信号，其实隐含的一个信号就是它所对应的地。而单端信号互相传递，其实也依赖于各自地的传递。这里就不具体展开讲了，留作下次具体论述。这里就是讲讲实际中遇到的几件和接地有关的事情。
做audio设计，有单端和差分两种信号输入输出方式。从信号质量上讲，我们都喜欢差分，讨厌单端。其实主要还是因为单端信号的地很难处理。最简单的就是把两边的地连在一起。但是这也出现了许多问题。
首先是测试，信号源的信号接过来，能测出很好的质量。我一直就比较困惑这个问题，同样是单端信号，信号源是怎么处理这个问题的呢（我猜测信号线的地并不是仪器的地）。
当我们把设计好的芯片送给应用人员时，他们那里的抱怨接踵而来，芯片ADC接收到的信号不对，DAC输出的信号不对，等等。刚开始他们抱怨用ADC从声卡输入端接收信号时，出现有节奏的声音。我们反驳说，声卡本身就不是高质量的输出，不能期望有好的输出质量，换言之，也许本身音源就有问题，毕竟之前测出了好的质量是我们最大的底气。但应用人员也不甘心。他们继续反驳，如果他们用声卡自己播自己录，就没有问题。这下大老板也出面了，要我们解释，因为逻辑上的推理就是音源质量没问题。想了想，也只能做不同实验去验证。于是设计了一个实验就是两台电脑的声卡互相播和录，这一来也出现了问题。所以其实就是地的问题。自己播和录，用的是自己pcb上同样的地。而两个电脑互连，就是把两个地在输入线那里做了连接，虽然电阻不大，但仍然是有问题的。
之后在应用那里又碰到了奇怪的问题（不过由于上一次的解释，他们轻易不说芯片有问题了）。当我们的pcb一边连电脑声卡的输出，一边连一个调试器时，录到的信号又有问题。这次我们也没法一下子解决，只能实验。试到最后发现当调试器接到另一台电脑上时，一切都正常了。
我们的pcb是数模混合的，模拟和数字两边的地单点连接。但是模拟信号进来时，单端信号的地也是在接口处和我们的模拟地连接上。而数字信号进来时，地也是要和数字那边的地连接上。同样，电源信号进来时，电源的地也是连上了。所以如果在更高的系统级看，也许就谈不上单点接地。更主要的是根本不清楚电脑声卡那里地是如何处理的。所以这个问题一直困惑着我。从理论上来说，只要知道了所有pcb的走线方式，就可以像后仿真一样估算出问题的所在。但这个”知道所有“几个字可是困难重重，所以不知道大家是否有好的估计方法。
当最近研究了市电的连接之后发现，上面这个问题似乎还得向上延伸到市电的连接。因为所有的电源都离不开市电，而市电也有地这个说法，而这个地可是真正的大地。我们的信号地和这个大地是既有联系又有区别。从某些资料来看，这个大地也是导致各个pcb地产生差异的一个来源。而测试仪应该是考虑到了这些问题，所以在电路设计上有特别之处，才使得我们的测试能顺利进行，不受太多干扰。目前我手上的资料还没完全研究透彻，有的信息也不完整，例如测试仪的设计也看不到具体内容，所以这方面的信息目前还是以猜测和推断为主，希望什么时候能归纳出比较准确的信息和大家一起讨论。

补充：关于“地”这个概念。
严格来说，电子工程师和电力工程师说的地，以及大地是不同的。我们平时用的交流电有L线和N线的区别。L就是火线，N是零线。从普通意义上来说，N线是和大地等电位的（有个物理老师曾说以前农村只接火线，然后直接接地，灯泡也是能点亮的）。但是插头有的还有地线，这个地线在插座里按理是接大地的（注意，按理而已），在电器上则应该接机壳。这种设计可以保证当机壳不小心与火线连接后，机壳与大地等电位，防止人看到220V电压。这里的地，确确实实是大地。220V进入电器后，一般要被整流，整流后的电路也有一个地，这个地和大地的电位不一致，所以人碰到会触电。要想安全，得再通过变压器构成一个新的回路。在变压器的另一侧是个浮动的回路，因此那里的地电位与大地比，是不确定的，如果我们碰了这个地，由于没有回路，因此就是安全的。当然实践中，这个地和变压器另一侧的地dc不连接，ac是连接的。如果考虑触电，是不用担心，但是如果考虑噪声，就不一定能忽略。
一件有意思的事情是：当我用手去碰led灯时，有时候灯会亮，有时候不会。为什么会亮，似乎很多人都说不清。如果下次你碰到类似的事情，可以好好分析一下，我想那时对整个供电系统的理解会更清晰一些。
我们平时用的设备，许多都是用变压器隔离的，例如信号发生器。但比较奇怪的是示波器，它的地是与插头的地线等电位的。
 

