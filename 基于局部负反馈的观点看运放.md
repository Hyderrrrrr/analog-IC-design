# 反馈观点看opa
最近的一期jssc上有一篇讲opa/ldo设计的文章，里面提到用局部负反馈的观点看miller电容，我很感兴趣。
这个观点其实并不算很新颖，几年前hujising小组在做nested opa时，就是用这个观点来给出设计方法的，只是没有明说而已，我是猜了一段时间才明白他们的思路，就是从最内层开始，逐层看作一个小运放设计。看jssc上新文章时，从他的参考文献又跑到wiki上，又意外发现原来这方法据说是控制理论里的一种经典做法，这样就总算给它给了一个理论依据。
除此之外，早年还有一个做nested opa的文章，专门提到nested opa可以降低运放的谐波，用的解释方法也仍然是把输出级放在环路最内部去分析。当时看的时候也是想了一段时间才明白他的思路。
这个方法说起来也很简单，就是把通常miller opa的第二级看作一个小放大器，那么miller 电容就是这个放大器的反馈电容，这个小放大器就工作在负反馈状态下，自然他的带宽就是他的gbw，这就解释了miller电容对次级点的拓展作用。在这个观点下看，pole split就是root locus中反馈导致极点变动的同义词。
这个方法虽然看着比较强大，但是如何使用，我仍然存有困惑。首先，我们通常分析miller opa稳定性，都是在最后输出断开环路。从理论上说，等于只断开了外围的环路。严格的说，应该是断开两个环路的公共点才对。从理论上说，两个还是稍有区别的，只是如果是一个管子，差别理论上不会很大。那么我们是否应该用更严格的断环路方法呢？假如一个补偿形式很复杂的运放，理论上我们传统的断环路方式就会出问题。其次，这个方法解释miller opa很方便，如何扩展呢？比如cascode miller opa，那个cascode级如何表示呢？有的将其也建模成一个放大级，但是越是简单的单管，反而里面带的东西太多，为什么可以那样简化，为什么有的参数可以被忽略，在没找到一个统一原则前，我只好认为这是case by case的方法。我刚开始接触模拟电路的时候，就看到的是一个cascode miller opa的分析，当时文章还是直接计算得出的结果，最后的形式其实是三阶，被拆成了1阶加2阶，物理意义一点也不明显，也不容易记忆，但毕竟这是一个准确的结果。在另一个论文里，又是类似pll的分析一样，直接闭环去算传输函数，物理意义也不明显。如果可以用一个统一的原则将cascode级简化成另一级放大，自然是设计者的福音。但是这种方法也必须得告诉我们，简化时前提是什么。同时鉴于原始的计算方法里该级是一个2阶形式，如果这种方法不能给出同样类似的信息，而只能给出一个一阶的形式，那意义就小了很多。
不管怎么说，这种方法毕竟将opa化简成了我们平时熟悉的信号流形式，还是方便了一些内容的记忆。也许以后的教科书会用这种观点去直接分析运放也未尝不可。
 

