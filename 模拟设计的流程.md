# 模拟电路设计的流程
现在数字电路很讲究流程，还设有有专门的流程组。我的理解是这样的，流程就是用制度去保证人很少犯错。但是为什么几年前流程组还没组建呢？我的理解是这样的，事情必须复杂到一定程度，又可以简化到一定程度，才能看到流程的好处。就是说复杂是复杂，但是规律性又很强，可以复用。否则每次都针对新情况设计一个新流程，岂不是自己给自己找麻烦？
说完了数字，这里还是重点讨论模拟。似乎不会有公司给模拟搞个流程组（我见过的公司太少，有知道更多的可以留言）。我的理解是这样的，模拟的事情很简单，但是模拟的事情又很复杂。简单是说没有几样事情，复杂是说次次碰到的事情都可能不同。可能有些说相声了，不知道有没有人和我同感。
简单的说明一下我所经历的模拟设计流程：先是定spec，看个人做什么，如果是大的项目的leader，可以看做是项目的用户需求，如果是把大模块拆成小模块了，可以看成是各小block的设计任务。根据情况不同，可以写成书面的，也可以口头讨论。严格说，还不算一般理解的设计的开始。然后是行为级设计，这也看情况，有的就完全不需要，有的自己手推公式也算，有的太复杂，就要用matlab，用veriloga，或者icfb里用理想电阻电容，怎么方便怎么来。行为级的目的，一个是增加对系统的理解，另一个是提高仿真速度。和数字的类比，就好比是做算法的人写出c代码。之后才是一般理解的画电路图，做仿真。这好比是rtl代码实现。做仿真其实有些像数字中的验证工作。其实验证和仿真的意义非常重大。仿真就是看自己的设计是否按照自己的预期实现。而自己的仿真电路就反映了自己对电路工作的理解。所以如果只看仿真结果而不看仿真是如何实现的，就是白搭。说这个是因为以前经常有不懂模拟电路的头，当电路出问题了，会对我们这边说，你快仿仿，看看问题在哪里。似乎仿真包治百病。这可能就是从数字电路设计处继承的习惯。我认为好的思维方式应该是先收集一定的现象，然后通过思考进行定位，然后才是通过仿真去验证思考的结果或者帮助思考。模拟的仿真和数字另一个不同就是目前数字有把仿真放到验证组的趋势，而模拟的仿真很难脱离设计者。电路图结束后就是版图，版图有的公司是设计人员实现，有的则是单独的，不过即使是单独的，设计人员也依然负责把关。版图之后是后仿（其实两者通常交叉耦合）。这与数字的后端之后门仿也有类似之处。
除了这些，给soc做模拟ip还会有一些其他不完全算在传统设计概念里，但是也离不开设计者的工作，比如做数字集成用的模型，比如提供时序信息和版图信息，换句话说，就是把一个复杂的模拟IP包装成一个简单的黑盒子，给外界扔一个通用的接口信息。其实这些很多时候倒是可以做些自动化的工具简化工作。
这么看下来，现在的工具给设计者武装的很少，就是画电路图，仿真，画版图三大样，不像数字的无数种工具，如同集团军一般。但是要把工具用好，也有技巧在里面。特别是仿真，也同样要做tradeoff，是时间和精度的tradeoff。时常有人问要不要做蒙特卡洛仿真，要不要做这个仿真，那个仿真。当时我给我们小组写规范的时候，写到这里统统都没要求。不是不想，是没法一刀切。也许等某天机器无穷快，机器无穷多，可以硬性规定一些是必须做的。但是不硬性规定，就会依赖于设计人员的素质，而设计流程的一个目的就是要尽可能脱离人的素质。这真是一个难题啊。
 

